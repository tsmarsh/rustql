# Basic TCL extension test for RustQL

# Test 1: Create table
do_test basic-1.1 {
    execsql {CREATE TABLE t1(a, b, c)}
    execsql {SELECT name FROM sqlite_master WHERE type='table'}
} {t1}

# Test 2: Insert and select
do_test basic-1.2 {
    execsql {INSERT INTO t1 VALUES(1, 2, 3)}
    execsql {SELECT * FROM t1}
} {1 2 3}

# Test 3: Multiple inserts
do_test basic-1.3 {
    execsql {INSERT INTO t1 VALUES(4, 5, 6)}
    execsql {INSERT INTO t1 VALUES(7, 8, 9)}
    execsql {SELECT * FROM t1}
} {1 2 3 4 5 6 7 8 9}

# Test 4: WHERE clause
do_test basic-1.4 {
    execsql {SELECT * FROM t1 WHERE a > 1}
} {4 5 6 7 8 9}

# Test 5: Column selection
do_test basic-1.5 {
    execsql {SELECT b FROM t1}
} {2 5 8}

# Test 6: Multiple tables
do_test basic-1.6 {
    execsql {CREATE TABLE t2(x, y)}
    execsql {INSERT INTO t2 VALUES(10, 20)}
    execsql {SELECT * FROM t1, t2 WHERE a=1}
} {1 2 3 10 20}

# Test 7: Expressions
do_test basic-1.7 {
    execsql {SELECT a+b FROM t1 WHERE a=1}
} {3}

# Test 8: ORDER BY
do_test basic-1.8 {
    execsql {SELECT a FROM t1 ORDER BY a DESC}
} {7 4 1}

# Test 9: Error handling
do_test basic-1.9 {
    catchsql {SELECT * FROM nonexistent}
} {1 {no such table: nonexistent}}

# Test 10: Aggregate functions
do_test basic-1.10 {
    execsql {SELECT count(*) FROM t1}
} {3}

finish_test
